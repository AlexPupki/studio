# Управление контентом блога

**Версия: 1.0.0**

Этот документ описывает структуру данных и логику работы для модуля блога.

## 1. Модель данных

### 1.1. `Post` (Пост)

Основная сущность, представляющая статью.

- `id`: UUID, первичный ключ.
- `slug`: Уникальный идентификатор поста в URL (например, `kak-my-proveli-leto`).
- `title`: Заголовок статьи.
- `content`: Основное тело статьи (поддерживает Markdown или HTML).
- `excerpt`: Краткая выжимка из статьи для превью.
- `coverImageUrl`: URL обложки поста.
- `status`: Состояние поста (`draft`, `scheduled`, `published`, `archived`).
- `authorId`: ID автора (ссылка на `users`).
- `categoryId`: ID категории (ссылка на `categories`).
- `publishedAt`: Дата и время публикации (может быть в будущем для отложенных постов).
- `createdAt`, `updatedAt`: Временные метки.

### 1.2. `Category` (Категория/Рубрика)

Используется для группировки постов по темам. У одного поста может быть только одна категория.

- `id`: UUID, первичный ключ.
- `slug`: Уникальный идентификатор.
- `name`: Название категории (например, "Новости компании").

### 1.3. `Tag` (Тег)

Используется для более гибкой классификации. У поста может быть множество тегов.

- `id`: UUID, первичный ключ.
- `slug`: Уникальный идентификатор.
- `name`: Название тега (например, "Вертолеты").

### 1.4. `posts_to_tags` (Связующая таблица)

Таблица для реализации отношения "многие-ко-многим" между постами и тегами.

- `postId`: ID поста.
- `tagId`: ID тега.

## 2. Логика работы

- **Отложенная публикация**: Посты со статусом `scheduled` и `publishedAt` в будущем не отображаются на публичном сайте. Специальная cron-задача должна периодически проверять такие посты и менять их статус на `published`, когда наступает время публикации.
- **Генерация слагов**: `slug` должен автоматически генерироваться из `title` при создании поста, с последующей транслитерацией и проверкой на уникальность.
- **API**:
  - `GET /api/content/posts`: Возвращает список постов со статусом `published`. Поддерживает фильтрацию по `tag` и `category` (по их слагам) и пагинацию (`limit`/`offset`).
  - `GET /api/content/posts/{slug}`: Возвращает один пост по его слагу.

## 3. Админ-панель (Требования)

- CRUD-операции для постов, категорий и тегов.
- Возможность выбора даты для отложенной публикации.
- Загрузчик для обложки поста.
- WYSIWYG-редактор для поля `content`.
- Автоматическое создание/редактирование слага с проверкой на уникальность.

    