# UI Playbook: CMS с блочным редактором

**Статус:** Обсуждение

Этот документ описывает план и архитектуру для создания системы управления страницами на основе блочного редактора.

## 1. Концепция

Цель — дать операторам возможность создавать и редактировать страницы сайта (например, "О нас", "Контакты", лендинги для акций) без необходимости писать код.

- **Страница как данные**: Каждая страница — это запись в таблице `pages` в PostgreSQL.
- **Блочный редактор**: Контент страницы состоит из массива JSON-объектов (`content_blocks`), где каждый объект представляет собой визуальный блок (Hero, Text, Gallery и т.д.).

## 2. План реализации

### Этап 1: Бэкенд и данные
- [ ] Определить финальную схему таблиц `pages` и `page_versions` в Drizzle (`schema.ts`).
- [ ] Создать Server Actions для CRUD-операций со страницами.

### Этап 2: Админ-панель (CMS)
- [ ] Создать интерфейс для списка страниц в `/ops/pages`.
- [ ] Создать базовый редактор страниц в `/ops/pages/edit/[slug]`.
- [ ] Реализовать логику добавления, удаления и изменения порядка блоков.
- [ ] Реализовать UI для редактирования данных каждого типа блока.

### Этаap 3: Публичный сайт
- [ ] Создать динамический роут `src/app/(public)/[...slug]/page.tsx`, который будет "ловить" все страницы.
- [ ] Реализовать логику, которая по `slug` находит страницу в БД.
- [ ] Создать "рендер-менеджер", который будет проходиться по массиву `content_blocks` и вызывать соответствующие React-компоненты для каждого блока.

## 3. Список блоков (v1)

- [ ] **Hero**: Заголовок, подзаголовок, фоновое изображение, CTA-кнопка.
- [ ] **Text**: Форматированный текстовый блок (Markdown/HTML).
- [ ] **Gallery**: Карусель или сетка изображений.
- [ ] **Features**: Список преимуществ с иконками.
- [ ] **CTA**: Яркий блок "Призыв к действию".

---

Теперь я готов к обсуждению. Мы можем детализировать любой из этих пунктов. Например, уточнить структуру данных для каждого блока или продумать, как будет выглядеть интерфейс в админке.