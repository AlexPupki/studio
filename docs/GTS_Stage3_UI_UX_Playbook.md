# Правила UI/UX для приложений Grand Tour Sochi

Вот компактный, но боевой свод правил: архитектура, оформление, запреты и чек-листы под наш стек (Next.js + RSC, Tailwind, shadcn/ui).

# 1) Базовые принципы UX

* **Ясность > красота.** Одно главное действие на экран, остальное — вторично.
* **Последовательность.** Одинаковые паттерны навигации, названия, цвета, поведение.
* **Иерархия.** Заголовок → подзаголовок → содержимое → вторичное.
* **Обратная связь.** Любое действие даёт видимый результат ≤100–200 мс (навигация, клик, ввод).
* **Прощение.** Отмена, откат (undo), черновики, автосохранение.

# 2) Архитектура фронта (Next.js/RSC)

* **RSC по умолчанию.** Данные тянем на сервере, клиентские компоненты — только там, где реально нужен state/эффекты/события.
* **Жёсткая изоляция.** Всё, что ходит в БД/`pg`, — в `src/lib/server/**` + `'use server'` + `import 'server-only'`.
  Всё, что может оказаться в Edge (`middleware`, утилиты формата/URL), — без Node-зависимостей.
* **Стриминг и Suspense.** Частично рендерим страницы, показываем skeleton вместо глобального «лоадера».
* **Маршрутизация как контракт.** Чистые URL, параметризация, query — часть состояния (поиск, фильтры, сортировка).

# 3) Дизайн-система и токены

* **Токены через CSS-переменные.** В `:root` объявляем `--radius`, `--space-2`, `--primary`, семантические цвета: `--bg`, `--fg`, `--muted`, `--destructive`, `--warning`, `--success`.
* **Темы.** `data-theme="light|dark"`, уважаем `prefers-color-scheme`, запоминаем выбор пользователя.
* **Ограниченная палитра.** 1 главный акцент + 1 success + 1 warning + 1 destructive.
* **Типографика.** База 14–16 px, `clamp()` для заголовков, межстрочный ≥1.4, строки ≤80 символов.

# 4) Сетка, отступы, адаптив

* **8-pt система.** Отступы: 4/8/12/16/24/32…; компоненты кратны 8 px.
* **Контейнер.** Макс. ширина контента 1200–1280 px, читаемый текст \~65–80 знаков.
* **Клик-таргеты ≥44 px** на тач-экранах, интерактив — не ближе 8 px друг к другу.

# 5) Навигация

* **Верхний бар + боковая навигация** (если нужно), «хлебные крошки» для глубины >2.
* **Первичное действие — справа**, вторичное — слева (или менее контрастное).
* **Стабильные якоря.** Логотип → «Домой», аватар → меню аккаунта, иконка поиска → поиск.

# 6) Состояния: загрузка, пусто, ошибка

* **Загрузка:** skeleton для блоков (>300 мс), не используем полноэкранный спиннер без контента.
* **Пустые состояния:** пиктограмма, краткое объяснение, CTA («Создать…», «Импортировать…»), ссылка на пример/шаблон.
* **Ошибки:** заголовок + простая причина + действие («Повторить», «Открыть лог», «Связаться с поддержкой»). Тех. детали — разворачиваем по клику.

# 7) Формы и валидация

* **Label всегда видим.** Placeholder — подсказка, не замена label.
* **Валидация:** на blur + на submit, сообщения рядом с полем, говорим как исправить.
* **Маски и форматтеры:** телефон, дата, сумма — помогают вводу; не мешают копи-пасте.
* **Сохранение:** авто-сейв по дебаунсу (500–1000 мс) и/или явная кнопка «Сохранить». Показ статуса: «Сохранено 12:04».
* **Разрушающие действия:** двойное подтверждение или ввод ключевого слова.

# 8) Таблицы, списки, фильтры

* **Виртуализация** при >100–200 строках.
* **Сортировка и фильтры** с синхронизацией в URL, чипы выбранных фильтров над таблицей.
* **Пагинация** для каталогов/поиска; бесконечная прокрутка — только для «фида».
* **Пакетные действия** — чекбоксы + панель действий, всегда есть «Отменить».

# 9) Микрокопирайтинг (RU)

* Говорим просто и по делу: **глагол + объект** («Создать счёт», «Отправить письмо»).
* Избегаем жаргона и пассивов.
* Тон — дружелюбный, но профессиональный; одинаковые термины по всему приложению.

# 10) Доступность (a11y)

* **WCAG 2.1 AA.** Контраст текста ≥ 4.5:1.
* **Клавиатура:** видимый фокус, логичный порядок Tab, `Esc` закрывает модалки, `Enter` — главное действие.
* **ARIA-атрибуты:** у модалок, алёртов, прогресса. Toast — не блокирующий, озвучиваемый.

# 11) Анимации и движение

* Длительность 150–250 мс, **easing** плавный (`ease-out` для входа, `ease-in` для выхода).
* Уважаем `prefers-reduced-motion`: отключаем параллакс, большие переходы.
* Анимация — для состояния/связей, а не «ради красоты».

# 12) Производительность как часть UX

* **Изображения:** `next/image`, правильные размеры, lazy, аватарки — `placeholder="blur"`.
* **Prefetch на hover**, но только для реальных пользовательских путей.
* **Код-сплиттинг:** клиентские компоненты минимальны, «тяжёлые» — по `dynamic(() => import(...), { ssr: false })` где оправдано.
* **Оптимистичные UI-обновления** с откатом при ошибке.

# 13) Уведомления

* **Toast для фоновых успехов**, явные «успех/ошибка» с ясной фразой.
* **Ошибки не авто-пропадают.** Успехи — 3–5 с.
* Центр уведомлений — для истории/длинных процессов.

# 14) Локализация и формат

* Локаль по умолчанию `ru-RU`, время — в TZ пользователя; в спорных местах показываем **и относительное, и абсолютное** время.
* Валюты/числа — локализуем; множественные формы (1, 2–4, 5–20).

# 15) Безопасность в UI

* Не показываем стек-трейсы и внутренние ID.
* Чётко объясняем причины отказа (доступ/валидация), не раскрывая лишнего.
* Подтверждение для платёжных/разрушающих операций, явная индикация «только чтение».

---

## Запреты («никогда не делай так»)

* **Не** тянем `pg/drizzle` и любые Node-модули в `middleware`/Edge.
* **Не** делаем один глобальный лоадер на всю страницу — только локальные skeleton’ы.
* **Не** используем placeholder вместо label.
* **Не** прячем фокус у клавиатуры и **не** ломаем Back/URL-состояние.
* **Не** кладём два первичных действия рядом равным весом.
* **Не** полагаемся только на цвет (добавляем иконку/текст/паттерн).
* **Не** запускаем бесконечные спиннеры без таймаута/варианта «Отмена».
* **Не** открываем новые вкладки без причины.
* **Не** используем «ОК/Отмена» — только понятные глаголы («Удалить», «Отменить»).
* **Не** делаем важный текст серым на сером (контраст!).
* **Не** перегружаем интерфейс подсказками и красными алертами — только там, где нужно действовать.

---

## Чек-лист перед мёрджем (UI-PR)

* [ ] Десктоп/мобайл/тёмная тема выглядят консистентно.
* [ ] Скелетоны/ошибки/пустые состояния предусмотрены.
* [ ] Контраст и клавиатурная навигация пройдены.
* [ ] URL отражает состояние (поиск, фильтры, сорт).
* [ ] Нагрузочные кейсы: 0, 1, 100+ элементов.
* [ ] Нет Node-импортов в Edge/клиентских компонентах.
* [ ] Перф: большие картинки и графики — ленивые, бандл не раздут.

## Чек-лист перед релизом

* [ ] Тексты вычитаны, термины едины.
* [ ] Логи/трекинг не мешают UX, можно отключить.
* [ ] 404/500 аккуратны, с путями назад.
* [ ] Cookie/политики/правовые ссылки присутствуют.
* [ ] Критические флоу (регистрация/оплата/сохранение) протестированы на медленной сети.